From 50a9a5c5de0ab5ad9a37ffbdeed140449ed42f9d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C5=A0ar=C5=ABnas?= <floatas@outlook.com>
Date: Fri, 25 Oct 2019 19:36:24 +0300
Subject: [PATCH 1/2] #30 added input for alt

---
 src/index.css | 25 +++++++++++++++++++++++++
 src/index.js  |  7 +++++++
 src/ui.js     | 19 ++++++++++++++++++-
 3 files changed, 50 insertions(+), 1 deletion(-)

diff --git a/src/index.css b/src/index.css
index 0ac23c0..b491d95 100644
--- a/src/index.css
+++ b/src/index.css
@@ -61,6 +61,28 @@
         display: none;
       }
     }
+
+    margin-bottom: 10px;
+  }
+
+  &__alt {
+    &[contentEditable="true"][data-placeholder]::before {
+      position: absolute;
+      content: attr(data-placeholder);
+      color: #707684;
+      font-weight: normal;
+      display: none;
+    }
+
+    &[contentEditable="true"][data-placeholder]:empty {
+      &::before {
+        display: block;
+      }
+
+      &:focus::before {
+        display: none;
+      }
+    }
   }
 
   &--empty {
@@ -74,6 +96,9 @@
     ^&__caption {
       display: none;
     }
+    ^&__alt {
+      display: none;
+    }
   }
 
   &--filled {
diff --git a/src/index.js b/src/index.js
index f0c0616..2fa20be 100644
--- a/src/index.js
+++ b/src/index.js
@@ -38,6 +38,7 @@
  * @property {boolean} stretched - should image be stretched to full width of container
  * @property {object} file — Image file data returned from backend
  * @property {string} file.url — image URL
+ * @property {string} alt — alternative text
  */
 
 // eslint-disable-next-line
@@ -56,6 +57,7 @@ import Uploader from './uploader';
  * @property {string} field - field name for uploaded image
  * @property {string} types - available mime-types
  * @property {string} captionPlaceholder - placeholder for Caption field
+ * @property {string} altPlaceholder - placeholder for alt field
  * @property {object} additionalRequestData - any data to send with requests
  * @property {object} additionalRequestHeaders - allows to pass custom headers with Request
  * @property {string} buttonContent - overrides for Select File button
@@ -106,6 +108,7 @@ export default class ImageTool {
       field: config.field || 'image',
       types: config.types || 'image/*',
       captionPlaceholder: config.captionPlaceholder || 'Caption',
+      altPlaceholder: config.altPlaceholder || 'Alt',
       buttonContent: config.buttonContent || '',
       uploader: config.uploader || undefined
     };
@@ -167,8 +170,10 @@ export default class ImageTool {
    */
   save() {
     const caption = this.ui.nodes.caption;
+    const alt = this.ui.nodes.alt;
 
     this._data.caption = caption.innerHTML;
+    this._data.alt = alt.innerHTML;
 
     return this.data;
   }
@@ -272,7 +277,9 @@ export default class ImageTool {
     this.image = data.file;
 
     this._data.caption = data.caption || '';
+    this._data.alt = data.alt || '';
     this.ui.fillCaption(this._data.caption);
+    this.ui.fillAlt(this._data.alt);
 
     Tunes.tunes.forEach(({ name: tune }) => {
       const value = typeof data[tune] !== 'undefined' ? data[tune] === true || data[tune] === 'true' : false;
diff --git a/src/ui.js b/src/ui.js
index aea32ac..b261b2e 100644
--- a/src/ui.js
+++ b/src/ui.js
@@ -24,6 +24,9 @@ export default class Ui {
       imagePreloader: make('div', this.CSS.imagePreloader),
       caption: make('div', [this.CSS.input, this.CSS.caption], {
         contentEditable: true
+      }),
+      alt: make('div', [this.CSS.input, this.CSS.alt], {
+        contentEditable: true
       })
     };
 
@@ -34,13 +37,16 @@ export default class Ui {
      *      <image-preloader />
      *    </image-container>
      *    <caption />
+     *    <alt />
      *    <select-file-button />
      *  </wrapper>
      */
     this.nodes.caption.dataset.placeholder = this.config.captionPlaceholder;
+    this.nodes.alt.dataset.placeholder = this.config.altPlaceholder;
     this.nodes.imageContainer.appendChild(this.nodes.imagePreloader);
     this.nodes.wrapper.appendChild(this.nodes.imageContainer);
     this.nodes.wrapper.appendChild(this.nodes.caption);
+    this.nodes.wrapper.appendChild(this.nodes.alt);
     this.nodes.wrapper.appendChild(this.nodes.fileButton);
   }
 
@@ -62,7 +68,8 @@ export default class Ui {
       imageContainer: 'image-tool__image',
       imagePreloader: 'image-tool__image-preloader',
       imageEl: 'image-tool__image-picture',
-      caption: 'image-tool__caption'
+      caption: 'image-tool__caption',
+      alt: 'image-tool__alt'
     };
   };
 
@@ -204,6 +211,16 @@ export default class Ui {
     }
   }
 
+  /**
+   * Shows alt input
+   * @param {string} text - alt text
+   */
+  fillAlt(text) {
+    if (this.nodes.alt) {
+      this.nodes.alt.innerHTML = text;
+    }
+  }
+
   /**
    * Changes UI status
    * @param {string} status - see {@link Ui.status} constants

From 53c7d0dc6e1cbd62694d312ce34e2cc47bfd4c3c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C5=A0ar=C5=ABnas?= <floatas@outlook.com>
Date: Fri, 25 Oct 2019 19:38:21 +0300
Subject: [PATCH 2/2] updated readme

---
 README.md | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/README.md b/README.md
index 40114f4..91d70b7 100644
--- a/README.md
+++ b/README.md
@@ -90,6 +90,7 @@ Image Tool supports these configuration parameters:
 | additionalRequestData | `object` | Object with any data you want to send with uploading requests |
 | additionalRequestHeaders | `object` | Object with any custom headers which will be added to request. [See example](https://github.com/codex-team/ajax/blob/e5bc2a2391a18574c88b7ecd6508c29974c3e27f/README.md#headers-object) |
 | captionPlaceholder | `string` | (default: `Caption`) Placeholder for Caption input |
+| altPlaceholder | `string` | (default: `Alt`) Placeholder for alt tag |
 | buttonContent | `string` | Allows to override HTML content of «Select file» button |
 | uploader | `{{uploadByFile: function, uploadByUrl: function}}` | Optional custom uploading methods. See details below. |
 
@@ -113,6 +114,7 @@ This Tool returns `data` with following format
 | -------------- | --------- | ------------------------------- |
 | file           | `object`  | Uploaded file data. Any data got from backend uploader. Always contain the `url` property |
 | caption        | `string`  | image's caption                 |
+| alt            | `string`  | image's alt tag                 |
 | withBorder     | `boolean` | add border to image             |
 | withBackground | `boolean` | need to add background          |
 | stretched      | `boolean` | stretch image to screen's width |
@@ -126,6 +128,7 @@ This Tool returns `data` with following format
             "url" : "https://www.tesla.com/tesla_theme/assets/img/_vehicle_redesign/roadster_and_semi/roadster/hero.jpg"
         },
         "caption" : "Roadster // tesla.com",
+        "alt": "Tesla roadster",
         "withBorder" : false,
         "withBackground" : false,
         "stretched" : true
